!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function o(e){var o=function(e,o){if("object"!==t(e)||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,o||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"===t(o)?o:String(o)}function l(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function n(e,o){if(o&&("object"===t(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22",width:"100%",height:"100%",focusable:"false","aria-hidden":"true",className:"dashicon dashicon-gravityforms-polls"},React.createElement("g",null,React.createElement("g",null,React.createElement("path",{className:"st0",d:"m19.754 7.04c0 0.062857 0 0.094286 0.030769 0.12571v7.4171 0.22 0.031429c-0.030769 0.062857-0.030769 0.094286-0.030769 0.15714-0.030769 0.031428-0.030769 0.062857-0.030769 0.094286-0.030769 0.031429-0.030769 0.062857-0.030769 0.094286 0 0.062857-0.030769 0.094286-0.030769 0.15714v0.031428c-0.092308 0.44-0.30769 0.88-0.55385 1.2571-0.030769 0-0.030769 0.031429-0.030769 0.031429-0.030769 0.062857-0.061538 0.094286-0.092308 0.15714-0.030769 0.031429-0.030769 0.031429-0.061538 0.062857-0.030769 0.031428-0.061538 0.062857-0.092308 0.094286-0.030769 0.031428-0.061538 0.062857-0.092308 0.094286-0.030769 0.031429-0.030769 0.031429-0.061538 0.062857-0.030769 0.062857-0.092308 0.094286-0.12308 0.12571 0 0-0.030769 0.031429-0.030769 0.031429-0.061538 0.031429-0.092308 0.094286-0.15385 0.12571-0.092308 0.094286-0.21538 0.18857-0.33846 0.25143l-0.18462 0.12571-6.1538 3.5829c-0.46154 0.28286-1.0769 0.44-1.7231 0.44-0.64615 0-1.2615-0.15714-1.7231-0.44l-1.0462-0.62857-5.2308-3.08s-0.030769 0-0.061538-0.031428c-0.89231-0.59714-1.6-1.8229-1.6308-2.8914v-0.12571-7.4171-0.22-0.031429c0.030769-0.062857 0.030769-0.094286 0.030769-0.15714 0.030769-0.031429 0.030769-0.062857 0.030769-0.094286 0.030769-0.031429 0.030769-0.062857 0.030769-0.094286 0-0.062857 0.030769-0.094286 0.030769-0.15714v-0.031429c0.092308-0.44 0.30769-0.88 0.55385-1.2571 0.030769 0 0.030769-0.031429 0.030769-0.031429 0.030769-0.062857 0.061538-0.094286 0.092308-0.15714 0.030769-0.031429 0.030769-0.031429 0.061538-0.062857s0.061538-0.062857 0.092308-0.094286 0.061538-0.062857 0.092308-0.094286c0.030769 0 0.030769-0.031429 0.061538-0.031429 0.030769-0.062857 0.092308-0.094286 0.12308-0.12571 0 0 0.030769-0.031429 0.030769-0.031429 0.061538-0.031429 0.092308-0.094286 0.15385-0.12571 0.092308-0.094286 0.21538-0.18857 0.33846-0.25143l0.18462-0.12571 6.0923-3.5829c0.46154-0.28286 1.0769-0.44 1.7231-0.44 0.64615 0 1.2615 0.15714 1.7538 0.40857l1.0462 0.62857 5.2308 3.08s0.030769 0 0.061538 0.031429c0.89231 0.59714 1.6 1.8229 1.6308 2.8914z"}),React.createElement("polygon",{points:"9.6154 15.486 5 15.486 5 9.8286 9.6154 9.8286",fill:"#fff"}),React.createElement("polygon",{points:"15.154 14.375 15.154 14.375 15.154 15.486 12.806 15.486 12.806 15.486 10.538 15.486 10.538 7 15.154 7",fill:"#fff"})))),i=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 70",width:"100%",height:"100%",focusable:"false","aria-hidden":"true",className:"dashicon dashicon-gravityforms-polls"},React.createElement("g",null,React.createElement("g",null,React.createElement("path",{className:"st0",d:"m64.2 22.4c-0.1-3.4-2.4-7.3-5.3-9.2-0.1-0.1-0.2-0.1-0.2-0.1l-17-9.8-3.4-2c-1.6-0.8-3.6-1.3-5.7-1.3s-4.1 0.5-5.6 1.4l-19.8 11.4-0.6 0.4c-0.4 0.2-0.8 0.5-1.1 0.8-0.2 0.1-0.3 0.3-0.5 0.4l-0.1 0.1c-0.1 0.1-0.3 0.2-0.4 0.4-0.1 0-0.1 0.1-0.2 0.1l-0.3 0.3-0.3 0.3-0.2 0.2c-0.1 0.2-0.2 0.3-0.3 0.5 0 0 0 0.1-0.1 0.1-0.8 1.2-1.5 2.6-1.8 4v0.1c0 0.2-0.1 0.3-0.1 0.5 0 0.1 0 0.2-0.1 0.3 0 0.1 0 0.2-0.1 0.3 0 0.2 0 0.3-0.1 0.5v0.1 0.7 23.6 0.4c0.1 3.4 2.4 7.3 5.3 9.2 0.1 0.1 0.2 0.1 0.2 0.1l17 9.8 3.4 2c1.5 0.9 3.5 1.4 5.6 1.4s4.1-0.5 5.6-1.4l20-11.4 0.6-0.4c0.4-0.2 0.8-0.5 1.1-0.8 0.2-0.1 0.3-0.3 0.5-0.4l0.1-0.1c0.1-0.1 0.3-0.2 0.4-0.4l0.2-0.2 0.3-0.3 0.3-0.3 0.2-0.2c0.1-0.2 0.2-0.3 0.3-0.5 0 0 0-0.1 0.1-0.1 0.8-1.2 1.5-2.6 1.8-4v-0.1c0-0.2 0.1-0.3 0.1-0.5 0-0.1 0-0.2 0.1-0.3 0-0.1 0-0.2 0.1-0.3 0-0.2 0-0.3 0.1-0.5v-0.1-0.7-23.6c-0.1-0.1-0.1-0.2-0.1-0.4z"}),React.createElement("path",{className:"st0",d:"m60.4 44.9c0 2.4-1.8 5.5-3.9 6.7l-20.4 11.8c-1 0.6-2.4 0.9-3.9 0.9s-2.9-0.3-3.9-0.9l-20.4-11.7c-1.6-0.9-3-2.8-3.6-4.8-0.2-0.6-0.3-1.3-0.3-1.9v-23.6c0-2.4 1.8-5.5 3.9-6.7l20.4-11.8c1-0.6 2.4-0.9 3.9-0.9s2.9 0.3 3.9 0.9l20.4 11.8c1.6 0.9 3 2.8 3.6 4.8 0.2 0.6 0.3 1.3 0.3 1.9v23.5z"}),React.createElement("g",{transform:"translate(16 14)",fill:"#fff"},React.createElement("path",{d:"m11.852 29.28h-10.074c-0.59259 0-1.0667 0.48-1.0667 1.08v10.2c0 0.6 0.47407 1.08 1.0667 1.08h10.074c0.59259 0 1.0667-0.48 1.0667-1.08v-10.2c0-0.6-0.47407-1.08-1.0667-1.08zm-1.0667 10.32h-8.0593v-8.16h8.0593v8.16z"}),React.createElement("path",{d:"m28.8 29.28h-10.074c-0.59259 0-1.0667 0.48-1.0667 1.08v10.2c0 0.6 0.47407 1.08 1.0667 1.08h10.074c0.59259 0 1.0667-0.48 1.0667-1.08v-10.2c0-0.6-0.47407-1.08-1.0667-1.08zm-0.94815 10.32h-8.0593v-8.16h8.0593v8.16z"}),React.createElement("polygon",{points:"9.9556 34.08 8.8889 32.88 6.0444 35.76 4.7407 34.44 3.5556 35.52 6.0444 38.04"}),React.createElement("path",{d:"m21.096 37.2v0.12l0.82963 0.84h0.11852l1.6593-1.68h0.11852l1.6593 1.68h0.11852l0.82963-0.84v-0.12l-1.6593-1.68v-0.12l1.6593-1.68v-0.12l-0.82963-0.84h-0.11852l-1.6593 1.68h-0.11852l-1.6593-1.68h-0.11852l-0.82963 0.84v0.12l1.6593 1.68v0.12l-1.6593 1.68z"}),React.createElement("polygon",{points:"13.63 25.68 0 25.68 0 8.88 13.63 8.88"}),React.createElement("polygon",{points:"31.052 22.32 31.052 22.32 31.052 25.68 24.059 25.68 24.059 25.68 17.304 25.68 17.304 4.6185e-14 31.052 4.6185e-14"})))));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=c(e);if(t){var r=c(this).constructor;o=Reflect.construct(l,arguments,r)}else o=l.apply(this,arguments);return n(this,o)}}var m=wp.i18n.__,u=wp.components,f=(u.Dashicon,u.DatePicker),v=u.Dropdown,g=u.PanelBody,y=u.Placeholder,d=u.SelectControl,b=u.TextControl,h=u.ToggleControl,R=wp.serverSideRender,k=wp.date.dateI18n,E=(wp.hasOwnProperty("blockEditor")?wp.blockEditor:wp.editor).InspectorControls,_=wp.element,w=_.Component,C=_.Fragment,P=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,t);var o,n,c,s=p(u);function u(){var t;e(this,u),(t=s.apply(this,arguments)).setFormId=t.setFormId.bind(r(t));var o=u.getForm(t.props.attributes.formId);return o&&o.hasConditionalLogic&&t.props.setAttributes({formPreview:!1}),t}return o=u,c=[{key:"getForm",value:function(e){return gform_block_polls.forms.find((function(t){return t.id==e}))}},{key:"getFormOptions",value:function(){for(var e=[{label:m("Select a Form","gravityformspolls"),value:""}],t=0;t<gform_block_polls.forms.length;t++)e.push({label:gform_block_polls.forms[t].title,value:gform_block_polls.forms[t].id});return e}}],(n=[{key:"setFormId",value:function(e){var t=u.getForm(e);this.props.setAttributes({formId:e}),t&&t.hasConditionalLogic&&this.props.setAttributes({formPreview:!1})}},{key:"render",value:function(){var e=this,t=this.props.attributes,o=t.formId,l=t.title,r=t.description,a=t.mode,n=t.ajax,c=t.tabindex,s=t.style,p=t.cookie,_=t.cookieDate,w=t.displayCounts,P=t.displayResultsLink,O=t.displayResultsOnSubmission,F=t.displayPercentages,N=t.formPreview,S=this.props,D=S.setAttributes,j=S.isSelected,x=[{label:m("Do Not Block","gravityformspolls"),value:""},{label:m("1 vote per day","gravityformspolls"),value:"1 day"},{label:m("1 vote per week","gravityformspolls"),value:"1 week"},{label:m("1 vote per month","gravityformspolls"),value:"1 month"},{label:m("1 vote before specific date","gravityformspolls"),value:"date"}],I=[j&&gform_block_polls.forms&&gform_block_polls.forms.length>0&&React.createElement(E,{key:"inspector"},React.createElement(g,{title:m("Form Settings","gravityformspolls")},React.createElement(d,{label:m("Form","gravityformspolls"),value:o,options:u.getFormOptions(),onChange:this.setFormId}),o&&React.createElement(d,{label:m("Mode","gravityformspolls"),value:a,options:[{label:m("Poll","gravityformspolls"),value:"poll"},{label:m("Results","gravityformspolls"),value:"results"}],onChange:function(e){return D({mode:e})}}),o&&"poll"===a&&React.createElement(h,{label:m("Form Title","gravityformspolls"),checked:l,onChange:function(){return D({title:!l})}}),o&&"poll"===a&&React.createElement(h,{label:m("Form Description","gravityformspolls"),checked:r,onChange:function(){return D({description:!r})}})),o&&React.createElement(g,{title:m("Appearance","gravityformspolls"),initialOpen:!0,className:"gform-block__panel"},React.createElement(d,{label:m("Style","gravityformspolls"),value:s,options:[{label:m("Green","gravityformspolls"),value:"green"},{label:m("Red","gravityformspolls"),value:"red"},{label:m("Orange","gravityformspolls"),value:"orange"},{label:m("Blue","gravityformspolls"),value:"blue"}],onChange:function(e){return D({style:e})}}),React.createElement(h,{label:m("Display Results Percentages","gravityformspolls"),checked:F,onChange:function(){return D({displayPercentages:!F})}}),React.createElement(h,{label:m("Display Number of Votes For Each Selection","gravityformspolls"),checked:w,onChange:function(){return D({displayCounts:!w})}}),"poll"===a&&React.createElement(h,{label:m("Display Link To Results Below Form","gravityformspolls"),checked:P,onChange:function(){return D({displayResultsLink:!P})}}),"poll"===a&&React.createElement(h,{label:m("Display Results Upon Submission","gravityformspolls"),checked:O,onChange:function(){return D({displayResultsOnSubmission:!O})}})),o&&React.createElement(g,{title:m("Advanced","gravityformspolls"),initialOpen:!0,className:"gform-block__panel"},o&&!u.getForm(o).hasConditionalLogic&&React.createElement(h,{label:m("Preview","gravityformspolls"),checked:N,onChange:function(){return D({formPreview:!N})}}),"poll"===a&&React.createElement(h,{label:m("AJAX","gravityformspolls"),checked:n,onChange:function(){return D({ajax:!n})}}),"poll"===a&&React.createElement(b,{label:m("Tabindex","gravityformspolls"),value:c,onChange:function(e){return D({tabindex:e})},placeholder:"-1"}),"date"!==p&&React.createElement(d,{label:m("Repeat Voters","gravityformspolls"),value:p||"",options:x,onChange:function(e){return D({cookie:e})},className:"gform-block-poll__cookie"}),"date"===p&&React.createElement("div",{className:"components-base-control"},React.createElement("label",{className:"components-base-control__label"},m("Repeat Voters","gravityformspolls")),React.createElement(v,{key:"gform-block-poll__cookie-date",position:"bottom left",contentClassName:"gform-block-poll__cookie-date-popover",className:"gform-block-poll__cookie-date",renderToggle:function(e){var t=e.onToggle,o=e.isOpen;return React.createElement(C,null,React.createElement(d,{value:p,options:x,onChange:function(e){return D({cookie:e,cookieDate:null})}}),React.createElement("button",{type:"button",className:"button-link",onClick:t,"aria-expanded":o},_?k("F j, Y",_):m("Select a Date","gravityformspolls")))},renderContent:function(){return[React.createElement(f,{key:"date-picker",currentDate:_,onChange:function(e){return D({cookieDate:e})}})]}})),React.createElement("div",{className:"components-base-control"},React.createElement("p",null,m("Form ID:","gravityformspolls"),React.createElement("br",null),o))))];return!o||!N||o&&u.getForm(o).hasConditionalLogic?[I,React.createElement(y,{key:"placeholder",className:"wp-block-embed gform-block__placeholder"},React.createElement("div",{className:"gform-block__placeholder-brand"},React.createElement("div",{className:"gform-icon"},i),React.createElement("p",null,React.createElement("strong",null,"Gravity Forms + Polls"))),gform_block_polls.forms&&gform_block_polls.forms.length>0&&React.createElement("form",null,React.createElement("select",{value:o,onChange:function(t){return e.setFormId(t.target.value)}},u.getFormOptions().map((function(e){return React.createElement("option",{key:e.value,value:e.value},e.label)})))),(!gform_block_polls.forms||gform_block_polls.forms&&0===gform_block_polls.forms.length)&&React.createElement("form",null,React.createElement("p",null,m("You must have at least one Polls-enabled form to use the block.","gravityformspolls"))))]:[I,React.createElement(R,{key:"form_preview",block:"gravityforms/polls",attributes:this.props.attributes})]}}])&&l(o.prototype,n),c&&l(o,c),Object.defineProperty(o,"prototype",{writable:!1}),u}(w),O=P,F=wp.i18n.__;(0,wp.blocks.registerBlockType)("gravityforms/polls",{title:"Poll",description:F("Display a poll or poll results on your page.","gravityformspolls"),category:"embed",keywords:["gravity forms","form","polls"],supports:{customClassName:!1,className:!1,html:!1},attributes:{formId:{type:"string"},mode:{type:"string",default:"poll"},title:{type:"boolean",default:!0},description:{type:"boolean",default:!0},ajax:{type:"boolean",default:!1},tabindex:{type:"string"},style:{type:"string",default:"green"},cookie:{type:"string",default:null},cookieDate:{type:"string"},displayCounts:{type:"boolean",default:!0},displayResultsLink:{type:"boolean",default:!0},displayResultsOnSubmission:{type:"boolean",default:!0},displayPercentages:{type:"boolean",default:!0},formPreview:{type:"boolean",default:!0}},icon:s,edit:O,save:function(){return null}})}();