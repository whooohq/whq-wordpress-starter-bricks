'use strict';window.tsfGBC=function(a){function b(a){return j.getEditedPostAttribute(a)}function c(){m={title:b("title"),link:j.getPermalink(),content:b("content"),excerpt:b("excerpt"),visibility:j.getEditedPostVisibility()}}function d(a){return m[a]||null}function e(){let a=m;c(),a.title!==m.title&&n("title"),a.link!==m.link&&n("link"),a.content!==m.content&&n("content"),a.excerpt!==m.excerpt&&n("excerpt"),a.visibility!==m.visibility&&n("visibility")}function f(){o?j.didPostSaveRequestSucceed()?(r(),q()&&q().cancel(),g()):q():j.isSavingPost()&&(j.isPreviewingPost()?(o=!0,p="preview"):j.isAutosavingPost()?(o=!0,p="autosave"):(o=!0,p="save"))}function g(){o=!1}function h(){if(j.isPostSavingLocked())3>++s?r():(r()&&r().cancel(),s=0);else{s=0;let a=!j.hasChangedContent();"preview"===p?document.dispatchEvent(new CustomEvent("tsf-gutenberg-onpreview")):"autosave"===p?document.dispatchEvent(new CustomEvent("tsf-gutenberg-onautosave")):"save"===p?a=!0:void 0;a&&document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave"))&&document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave-completed")),document.dispatchEvent(new CustomEvent("tsf-gutenberg-saved-document",{detail:{savedType:p}})),p=""}}function i(){k.isEditorSidebarOpened()?!t.opened&&(t.opened=!0,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-opened"))):t.opened&&(t.opened=!1,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-closed")))}const j=wp.data.select("core/editor"),k=wp.data.select("core/edit-post"),{debounce:l}=lodash;let m;const n=b=>{a(document).trigger(`tsf-updated-gutenberg-${b}`,[d(b)])};let o=!1,p="";const q=l(g,7e3),r=l(h,500);let s=0,t={opened:!1};const u=()=>{const{subscribe:a}=wp.data;a(l(i,500)),a(l(e,300)),a(f),setTimeout(()=>{c(),n("title"),n("link"),n("content"),n("excerpt"),n("visibility"),document.dispatchEvent(new CustomEvent("tsf-subscribed-to-gutenberg"))})};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",u)}},{triggerUpdate:n})}(jQuery),window.tsfGBC.load();
