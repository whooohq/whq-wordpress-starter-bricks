'use strict';window.tsfSocial=function(){const a=new Map,b={},c=(a,b)=>{switch(b){case"addAdditions":let c=f(a).refs.title.dataset?.for;c&&tsfTitle.enqueueUnregisteredInputTrigger(c);break;default:}},d=(a,c)=>c?b[a]?.[c]:b[a],e=(a,d,e)=>{b[a][d]===e||(b[a][d]=e,c(a,d))},f=b=>a.get(b),g=a=>{function*b(a){const b=g("inputLocks"),d=g("placeholderLocks");switch(a){case"twitter":if(yield b.twTitle?g("defaults").twTitle:c.twTitle.value.trim(),b.twTitle||d.twTitle){yield g("defaults").twTitle;break}case"og":if(yield b.ogTitle?g("defaults").ogTitle:c.ogTitle.value.trim(),b.ogTitle||d.ogTitle){yield g("defaults").ogTitle;break}case"meta":case"ref":g("addAdditions")?yield e.title.innerHTML:yield e.titleNa.innerHTML;}}const{inputs:c,refs:e}=f(a),g=b=>d(a,b),h=a=>{const c=b(a);let d="";for(;"undefined"!=typeof d&&!d.length;)d=c.next().value,d?.length&&(d=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(d))));return d?.length?d:""},i=()=>{const a=g("inputLocks"),b=g("placeholderLocks");c.ogTitle.placeholder=a.ogTitle||b.ogTitle?tsf.decodeEntities(g("defaults").ogTitle):tsf.decodeEntities(h("meta")),c.twTitle.placeholder=a.twTitle||b.twTitle?tsf.decodeEntities(g("defaults").twTitle):tsf.decodeEntities(h("og"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"title",type:c})},k=()=>{j(c.ogTitle,h("og"),"opengraph"),j(c.twTitle,h("twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};e.title.addEventListener("change",m),e.titleNa.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogTitle.addEventListener("input",o),c.twTitle.addEventListener("input",o)},h=a=>{function*b(a,b){const d=g("inputLocks"),f=g("placeholderLocks");switch(a){case"twitter":if(yield d.twDesc?g("defaults").twDesc:c.twDesc.value.trim(),d.twDesc||f.twDesc){yield g("defaults").twDesc;break}case"og":if(yield d.ogDesc?g("defaults").ogDesc:c.ogDesc.value.trim(),d.ogDesc||f.ogDesc){yield g("defaults").ogDesc;break}case"meta":e.descInput?.value.length||("twitter"===b?yield g("defaults").twDesc:"og"==b&&(yield g("defaults").ogDesc));case"ref":yield e.desc.innerHTML;}}const{inputs:c,refs:e}=f(a),g=b=>d(a,b),h=(a,c)=>{const d=b(a,c);let e="";for(;"undefined"!=typeof e&&!e.length;)e=d.next().value,e?.length&&(e=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(e))));return e?.length?e:""},i=()=>{const a=g("inputLocks"),b=g("placeholderLocks");c.ogDesc.placeholder=a.ogDesc||b.ogDesc?tsf.decodeEntities(g("defaults").ogDesc):tsf.decodeEntities(h("meta","og")),c.twDesc.placeholder=a.twDesc||b.twDesc?tsf.decodeEntities(g("defaults").twDesc):tsf.decodeEntities(h("og","twitter"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"description",type:c})},k=()=>{j(c.ogDesc,h("og","og"),"opengraph"),j(c.twDesc,h("twitter","twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};e.desc.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogDesc.addEventListener("input",o),c.twDesc.addEventListener("input",o)};return{getStateOf:d,updateStateOf:e,updateStateAll:(b,c,d)=>{d=Array.isArray(d)?d:[d],a.forEach(({group:a,inputs:f,refs:g})=>{d.includes(a)||e(a,b,c)})},setInputInstance:(c,d,e)=>{const i=a=>document.querySelector(`[data-tsf-social-group="${c}"][data-tsf-social-type="${a}"]`),j={ogTitle:i("ogTitle"),twTitle:i("twTitle"),ogDesc:i("ogDesc"),twDesc:i("twDesc")},k={titleInput:document.getElementById(d),descInput:document.getElementById(e),title:document.getElementById(`tsf-title-reference_${d}`),titleNa:document.getElementById(`tsf-title-noadditions-reference_${d}`),desc:document.getElementById(`tsf-description-reference_${e}`)};return a.set(c,{group:c,inputs:j,refs:k}),b[c]={defaults:{ogTitle:"",twTitle:"",ogDesc:"",twDesc:""},inputLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1},placeholderLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1}},g(c),h(c),f(c)},getInputInstance:f}}();
