'use strict';window.tsfAys=function(){const a="undefined"!=typeof tsfAysL10n&&tsfAysL10n;let b=!1,c=!1,d=new Map;const e=()=>b,f=a=>a instanceof Element||a instanceof Document?[a]:[...document.querySelectorAll(Array.isArray(a)?a.join(", "):a)],g=()=>{b=!0},h=()=>{b=!1};let i;const j=()=>{h(),c&&(clearTimeout(i),i=setTimeout(q,1e3))},k=()=>{let a=e();h(),setTimeout(()=>{j(),a&&g()},1e3)},l=a=>{a.isTrusted&&(g(),m())},m=()=>{d.forEach((a,b)=>{b.removeEventListener(a,l)}),d.clear()},n=(a,b)=>{f(a).filter(a=>!a.classList.contains("tsf-input-not-saved")&&"hidden"!==a.type).forEach(a=>{d.set(a,b),a.addEventListener(b,l)})},o=(a,b)=>{f(a).forEach(a=>{a.addEventListener(b,j)})},p=(a,b)=>{f(a).forEach(a=>{a.addEventListener(b,k)})},q=()=>{c=!1,n([".tsf-metaboxes input[type=radio][name]",".tsf-metaboxes input[type=checkbox][name]",".tsf-metaboxes select[name]","#tsf-inpost-box .inside input[type=radio][name]","#tsf-inpost-box .inside input[type=checkbox][name]","#tsf-inpost-box .inside select[name]",".tsf-term-meta input[type=radio][name]",".tsf-term-meta input[type=checkbox][name]",".tsf-term-meta select[name]"],"change"),n([".tsf-metaboxes input:not([type=radio]):not([type=checkbox])[name]",".tsf-metaboxes textarea[name]","#tsf-inpost-box .inside input:not([type=radio]):not([type=checkbox])[name]","#tsf-inpost-box .inside textarea[name]",".tsf-term-meta input:not([type=radio]):not([type=checkbox])[name]",".tsf-term-meta textarea[name]"],"input"),o(document,"tsf-gutenberg-onsave-completed"),p([".tsf-metaboxes input[type=submit]","#publishing-action input[type=submit]","#save-action input[type=submit]","a.submitdelete",".edit-tag-actions input[type=submit]",".edit-tag-actions .delete"],"click"),document.dispatchEvent(new CustomEvent("tsf-registered-ays-listeners")),c=!0},r=b=>{e()&&(b.preventDefault(),b.returnValue=a.i18n.saveAlert)},s=()=>{q(),e()&&void 0,h(),window.addEventListener("beforeunload",r)};return Object.assign({load:()=>{document.body.addEventListener("tsf-interactive",s)}},{reset:j,getChangedState:()=>e(),areSettingsChanged:e,registerChange:g,deregisterChange:h,registerChangeListener:n,registerResetListener:o,registerUnloadListener:p,reloadDefaultListeners:q},{l10n:a})}(),window.tsfAys.load();
