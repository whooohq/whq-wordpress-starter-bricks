window.piotnetformsAddressAutocompleteInitMap=function(){document.querySelectorAll("[data-piotnetforms-address-autocomplete]").forEach((function(e,t,o){var a=new google.maps.places.Autocomplete(e),n=JSON.parse(e.getAttribute("data-piotnetforms-address-autocomplete-country")),s=e.getAttribute("data-piotnetforms-google-maps-lat"),i=e.getAttribute("data-piotnetforms-google-maps-lng"),l=e.getAttribute("data-piotnetforms-google-maps-zoom");!0===n.includes("All")?a.setComponentRestrictions({country:[]}):a.setComponentRestrictions({country:n});var r=e.closest(".piotnetforms-fields-wrapper").querySelectorAll("[data-piotnetforms-address-autocomplete-map]");if(r.length>0){var d={lat:parseFloat(s),lng:parseFloat(i)},c=parseInt(l),m=new google.maps.Map(r[0],{center:d,zoom:c}),p=new google.maps.InfoWindow,u=e.closest(".piotnetforms-fields-wrapper").querySelectorAll(".infowindow-content")[0];p.setContent(u);var f=new google.maps.Marker({map:m,anchorPoint:new google.maps.Point(0,-29)});a.addListener("place_changed",(function(){p.close(),f.setVisible(!1);var e=a.getPlace();if(e.geometry){e.geometry.viewport?m.fitBounds(e.geometry.viewport):(m.setCenter(e.geometry.location),m.setZoom(17)),f.setPosition(e.geometry.location),f.setVisible(!0);var t="";e.address_components&&(t=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" ")),u.children["place-icon"].src=e.icon,u.children["place-name"].textContent=e.name,u.children["place-address"].textContent=t,p.open(m,f)}else window.alert("No details available for input: '"+e.name+"'")}))}a.addListener("place_changed",(function(){var t=a.getPlace();e.setAttribute("data-piotnetforms-google-maps-lat",t.geometry.location.lat()),e.setAttribute("data-piotnetforms-google-maps-lng",t.geometry.location.lng()),e.setAttribute("data-piotnetforms-google-maps-formatted-address",t.formatted_address),e.setAttribute("data-piotnetforms-google-maps-zoom","17"),document.querySelectorAll("[data-piotnetforms-calculated-fields-distance-calculation]").forEach((function(e,t,o){if(null!==e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-from"))var a=e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-from");else a=document.getElementById(e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-from-field-shortcode").replace('[field id="',"form-field-").replace('"]',"")).getAttribute("data-piotnetforms-google-maps-formatted-address");if(null!==e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-to"))var n=e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-to");else n=document.getElementById(e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-to-field-shortcode").replace('[field id="',"form-field-").replace('"]',"")).getAttribute("data-piotnetforms-google-maps-formatted-address");if(""!=a&&""!=n){var s=e.getAttribute("data-piotnetforms-calculated-fields-distance-calculation-unit");!function(e,t,o,a,n){""!=e&&""!=t&&(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:[t],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},(function(e,t){if(t!=google.maps.DistanceMatrixStatus.OK);else if("ZERO_RESULTS"===e.rows[0].elements[0].status);else{var s=e.rows[0].elements[0].distance,i=s.value/1e3,l=s.value/1609.34;"km"==a?(o.innerHTML=i.toFixed(2),n.value=i.toFixed(2),jQuery(n).change()):(o.innerHTML=l.toFixed(2),n.value=l.toFixed(2),jQuery(n).change())}}))}(a,n,e.closest(".piotnetforms-field-container").querySelector(".piotnetforms-calculated-fields-form__value"),s,e)}})),null!=jQuery(e).attr("data-piotnetforms-address-autocomplete")&&jQuery(e).change()}))}))},document.addEventListener("elementor/popup/show",(function(e,t,o){piotnetformsAddressAutocompleteInitMap()}));