jQuery(document).ready((function(t){function e(){var e=t(document).find("[data-piotnetforms-preview-submission]");e.length>0&&e.each((function(){var e=t(this).attr("data-piotnetforms-preview-submission"),i=t(document).find('[data-piotnetforms-id="'+e+'"]'),a=[],s=new FormData,o=t(this);i.each((function(){if(0==t(this).closest(".piotnetforms-conditional-logic-hidden").length&&null==t(this).data("piotnetforms-stripe")&&null==t(this).data("piotnetforms-html")){t(this).closest(".piotnetforms-field-group").find("[data-piotnetforms-required]").html("");var i=t(this).attr("type"),s=t(this).attr("name"),o=t(this).closest("[data-piotnetforms-repeater-form-id]"),r="",n="",l="",d=-1,p=0;if(o.length>0){var f=t(this).parents("[data-piotnetforms-repeater-form-id]");n=o.data("piotnetforms-repeater-id"),f.each((function(){var i=t(this).data("piotnetforms-repeater-id"),a=t(document).find('[data-piotnetforms-repeater-form-id="'+e+'"][data-piotnetforms-repeater-id="'+i+'"]'),o=t(this).index()-a.index();r+=i+"|index"+o+"|"+s.replace("[]","").replace("form_fields[","").replace("]","")+","})),l=o.data("piotnetforms-repeater-label");var m=t(document).find('[data-piotnetforms-repeater-id="'+o.data("piotnetforms-repeater-id")+'"]');p=o.siblings('[data-piotnetforms-repeater-id="'+o.data("piotnetforms-repeater-id")+'"]').length+1,d=o.index()-m.index()}if(-1!==s.indexOf("[]")){var h=[];"checkbox"==i?t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+s+'"]:checked').each((function(){h.push(t(this).val())})):null==(h=t(this).val())&&(h=[]),b="";for(var c="",u=0;u<h.length;u++){if(null!=t(this).data("piotnetforms-send-data-by-label")){var v=h[u];"checkbox"==i?(g=t(this).closest(".piotnetforms-fields-wrapper").find('[value="'+v+'"]')).length>0&&(c+=g.data("piotnetforms-send-data-by-label")+","):(g=t(this).find('[value="'+v+'"]')).length>0&&(c+=g.html()+",")}b+=h[u]+","}b=b.replace(/,(\s+)?$/,"")}else if("radio"==i||"checkbox"==i){null!=t(this).data("piotnetforms-send-data-by-label")&&(c=t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+s+'"]:checked').data("piotnetforms-send-data-by-label"));var b=t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+s+'"]:checked').val()}else if(null!=t(this).data("piotnetforms-calculated-fields"))b=t(this).siblings(".piotnetforms-calculated-fields-form").text();else{var g;if(null!=t(this).data("piotnetforms-send-data-by-label"))v=t(this).val().trim(),(g=t(this).find('[value="'+v+'"]')).length>0&&(c=g.html());b=t(this).val().trim()}if(null!=b){var _={};_.label=t(this).closest(".piotnetforms-field-group").find(".piotnetforms-field-label").html(),_.name=s.replace("[]","").replace("form_fields[","").replace("]",""),_.value=b,null!=h&&(_.value_multiple=h),_.type=t(this).attr("type"),void 0!==t(this).attr("data-piotnetforms-address-autocomplete")&&(_.lat=t(this).attr("data-piotnetforms-google-maps-lat"),_.lng=t(this).attr("data-piotnetforms-google-maps-lng"),_.zoom=t(this).attr("data-piotnetforms-google-maps-zoom")),""!=c&&(_.value_label=c),t(this).closest(".piotnetforms-field-type-calculated_fields").length>0&&(_.calculation_results=t(this).val().trim()),t(this).closest(".piotnetforms-widget").hasClass("piotnetforms-conditional-logic-hidden")||(_.repeater_id=r,_.repeater_id_one=n,_.repeater_label=l,_.repeater_index=d,_.repeater_length=p,null!=t(this).data("piotnetforms-remove-this-field-from-repeater")&&(_.repeater_remove_this_field="1"),a.push(_))}}})),s.append("action","piotnetforms_ajax_form_builder_preview_submission"),s.append("fields",JSON.stringify(a)),null!=o.attr("data-piotnetforms-preview-submission-remove-empty-fields")&&s.append("remove_empty_fields",""),null!=o.attr("data-piotnetforms-preview-submission-custom-list-fields")&&s.append("custom_list_fields",o.attr("data-piotnetforms-preview-submission-custom-list-fields")),t.ajax({url:t("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),type:"POST",data:s,processData:!1,contentType:!1,success:function(t){o.html(t)}})}))}setTimeout(e(),1e3),t(document).on("keyup change","[data-piotnetforms-id]",t.debounce(250,(function(){e()})))}));