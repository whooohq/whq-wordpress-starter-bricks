!function(e,t){var o,a=e.jQuery||e.Cowboy||(e.Cowboy={});a.throttle=o=function(e,o,i,r){var s,n=0;function d(){var a=this,d=+new Date-n,c=arguments;function l(){n=+new Date,i.apply(a,c)}function f(){s=t}r&&!s&&l(),s&&clearTimeout(s),r===t&&d>e?l():!0!==o&&(s=setTimeout(r?f:l,r===t?e-d:e))}return"boolean"!=typeof o&&(r=i,i=o,o=t),a.guid&&(d.guid=i.guid=i.guid||a.guid++),d},a.debounce=function(e,a,i){return i===t?o(e,a,!1):o(e,i,!1!==a)}}(window),jQuery(document).ready((function(e){function t(t){if(null==t)var o=e(document).find("[data-piotnetforms-woocommerce-checkout-form-id]");else o=e(document).find('[data-piotnetforms-woocommerce-checkout-form-id="'+t+'"]');o.length>0&&o.each((function(){var t=e(this).attr("data-piotnetforms-woocommerce-checkout-form-id"),o=e(document).find('[data-piotnetforms-id="'+t+'"]'),a=[],i=new FormData,r=e(this);o.each((function(){if(null==e(this).data("piotnetforms-stripe")&&null==e(this).data("piotnetforms-html")){e(this).closest(".piotnetforms-field-group").find("[data-piotnetforms-required]").html("");var o=e(this).attr("type"),r=e(this).attr("name"),s=e(this).closest("[data-piotnetforms-repeater-form-id]"),n="",d="",c="",l=-1,f=0;if(s.length>0){var m=e(this).parents("[data-piotnetforms-repeater-form-id]");d=s.data("piotnetforms-repeater-id"),m.each((function(){var o=e(this).data("piotnetforms-repeater-id"),a=e(document).find('[data-piotnetforms-repeater-form-id="'+t+'"][data-piotnetforms-repeater-id="'+o+'"]'),i=e(this).index()-a.index();n+=o+"|index"+i+"|"+r.replace("[]","").replace("form_fields[","").replace("]","")+","})),c=s.data("piotnetforms-repeater-label");var p=e(document).find('[data-piotnetforms-repeater-id="'+s.data("piotnetforms-repeater-id")+'"]');f=s.siblings('[data-piotnetforms-repeater-id="'+s.data("piotnetforms-repeater-id")+'"]').length+1,l=s.index()-p.index()}if("file"==o)if(e(this).hasClass("error"));else{var u,h=[];r=e(this).attr("id").replace("form-field-",""),e.each(e(this)[0].files,(function(e,t){h.push(t.name),i.append(r+"[]",t)})),(u={}).label=e(this).closest(".piotnetforms-field-group").find(".piotnetforms-field-label").html(),u.name=r,u.value="",u.type=e(this).attr("type"),u.upload=1,u.file_name=h,u.repeater_id=n,u.repeater_id_one=d,u.repeater_label=c,u.repeater_index=l,u.repeater_length=f,null!=e(this).data("piotnetforms-remove-this-field-from-repeater")&&(u.repeater_remove_this_field="1"),null!=e(this).data("attach-files")&&(u["attach-files"]=1),a.push(u)}else if(-1!==r.indexOf("[]")){var _=[];"checkbox"==o?e(this).closest(".piotnetforms-fields-wrapper").find('[name="'+r+'"]:checked').each((function(){_.push(e(this).val())})):null==(_=e(this).val())&&(_=[]),y="";for(var g="",v=[],w=0;w<_.length;w++){if(null!=e(this).data("piotnetforms-send-data-by-label")){var b=_[w];"checkbox"==o?(k=e(this).closest(".piotnetforms-fields-wrapper").find('[value="'+b+'"]')).length>0&&(g+=k.data("piotnetforms-send-data-by-label")+","):(k=e(this).find('[value="'+b+'"]')).length>0&&(g+=k.html()+",")}y+=_[w]+",",null!=e(this).attr("data-piotnetforms-form-booking-item-options")&&(b=_[w],(k=e(this).closest(".piotnetforms-fields-wrapper").find('[value="'+b+'"]')).length>0&&v.push(k.attr("data-piotnetforms-form-booking-item-options")))}y=y.replace(/,(\s+)?$/,"")}else if("radio"==o||"checkbox"==o){null!=e(this).data("piotnetforms-send-data-by-label")&&(g=e(this).closest(".piotnetforms-fields-wrapper").find('[name="'+r+'"]:checked').data("piotnetforms-send-data-by-label"));var y=e(this).closest(".piotnetforms-fields-wrapper").find('[name="'+r+'"]:checked').val()}else if(null!=e(this).data("piotnetforms-calculated-fields"))y=e(this).siblings(".piotnetforms-calculated-fields-form").text();else{var k;if(null!=e(this).data("piotnetforms-send-data-by-label"))b=e(this).val().trim(),(k=e(this).find('[value="'+b+'"]')).length>0&&(g=k.html());y=e(this).val().trim()}null!=y&&((u={}).label=e(this).closest(".piotnetforms-field-group").find(".piotnetforms-field-label").html(),u.name=r.replace("[]","").replace("form_fields[","").replace("]",""),u.value=y,void 0!==v&&v.length>0&&(u.booking=v),""!=g&&(u.value_label=g),e(this).closest(".piotnetforms-field-type-calculated_fields").length>0&&(u.calculation_results=e(this).val().trim()),e(this).closest(".piotnetforms-widget").hasClass("piotnetforms-conditional-logic-hidden")||(u.repeater_id=n,u.repeater_id_one=d,u.repeater_label=c,u.repeater_index=l,u.repeater_length=f,a.push(u)))}})),i.append("action","piotnetforms_ajax_form_builder_woocommerce_checkout"),i.append("fields",JSON.stringify(a)),i.append("form_id",e(this).attr("data-piotnetforms-woocommerce-checkout-id")),i.append("post_id",e(this).attr("data-piotnetforms-woocommerce-checkout-post-id")),i.append("product_id",e(this).attr("data-piotnetforms-woocommerce-checkout-product-id")),e.ajax({url:e("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),type:"POST",data:i,processData:!1,contentType:!1,success:function(t){"1"==t.trim()&&(e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"),r.find("#place_order").attr("data-piotnetforms-woocommerce-checkout-place-order",""))}})}))}e(document).on("keyup change","[data-piotnetforms-id]",e.debounce(700,(function(){t(e(this).attr("data-piotnetforms-id"))}))),e(document).on("click","#place_order",(function(t){var o=e(this).closest("[data-piotnetforms-woocommerce-checkout-form-id]").attr("data-piotnetforms-woocommerce-checkout-form-id");if(null!=o){var a=e(document).find('[data-piotnetforms-id="'+o+'"]');0!=window.piotnetformsValidateFields(a)&&t.preventDefault()}})),e(window).on("load",(function(){t()})),e(document).on("click","[data-piotnetforms-woocommerce-sales-funnels-add-to-cart]",(function(t){t.preventDefault();var o=e(this);o.css("opacity","0.5"),o.find("[data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message]").remove();var a=e(this).attr("data-piotnetforms-woocommerce-sales-funnels-add-to-cart"),i=JSON.parse(a);e.ajax({url:e("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),type:"POST",data:{action:"piotnetforms_ajax_woocommerce_sales_funnels_add_to_cart",options:i},success:function(t){o.css("opacity","1"),1==JSON.parse(t).status?(o.append('<div data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message class="piotnetforms-woocommerce-sales-funnels-add-to-cart-message piotnetforms-woocommerce-sales-funnels-add-to-cart-message--success">'+i.message_success+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart")):(o.append('<div data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message class="piotnetforms-woocommerce-sales-funnels-add-to-cart-message piotnetforms-woocommerce-sales-funnels-add-to-cart-message--out-of-stock">'+i.message_out_of_stock+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"))}})}))}));