function bricksWooRefreshCartFragments(){if("undefined"!=typeof woocommerce_params){var t=woocommerce_params.wc_ajax_url;t=t.replace("%%endpoint%%","get_refreshed_fragments"),jQuery.post(t,(function(t,e){t.fragments&&bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")}))}}function bricksWooReplaceFragments(t){t&&jQuery.each(t,(function(t,e){var r=jQuery(t);r&&r.replaceWith(e)}))}function bricksWooMiniCartHideDetailsClickOutside(){const t=t=>{if(!t.classList.contains("cart-detail"))return;t.classList.remove("active");const e=t.closest(".brxe-woocommerce-mini-cart");e&&e.classList.toggle("show-cart-details")},e=bricksQuerySelectorAll(document,".cart-detail");e&&e.forEach((function(e){e.dataset?.skipClickOutside||document.addEventListener("click",(function(r){r.target.closest(".mini-cart-link")||!e.classList.contains("active")||r.target.closest(".cart-detail")||t(e)}))}));const r=bricksQuerySelectorAll(document,".cart-detail .bricks-mini-cart-close");r&&r.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();const r=e.target.closest(".cart-detail");r&&t(r)}))}))}function bricksWooMiniModalsToggle(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-toggle-target");if(e){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){var r=t.getAttribute("data-toggle-target");if(r!==e){var o=t.querySelector(r);if(null!==o&&o.classList.contains("active")){o.classList.remove("active");var c=t.closest(".brxe-woocommerce-mini-cart");c&&c.classList.remove("show-cart-details")}}}));var r=document.querySelector(e);if(null!==r){r.classList.toggle("active");var o=r.closest(".brxe-woocommerce-mini-cart");o&&o.classList.toggle("show-cart-details")}}}function bricksWooProductGallery(){bricksIsFrontend||void 0===jQuery(this).wc_product_gallery||jQuery(".woocommerce-product-gallery").each((function(){jQuery(this).trigger("wc-product-gallery-before-init",[this,window.wc_single_product_params]),jQuery(this).wc_product_gallery(window.wc_single_product_params),jQuery(this).trigger("wc-product-gallery-after-init",[this,window.wc_single_product_params])}))}function bricksWooStarRating(){bricksIsFrontend||jQuery(".brxe-product-reviews #rating").each((function(){jQuery(this).hide(),0===jQuery(this).closest(".brxe-product-reviews").find("p.stars").length&&jQuery(this).before('<p class="stars">\t\t\t\t\t\t<span>\t\t\t\t\t\t\t<a class="star-1" href="#">1</a>\t\t\t\t\t\t\t<a class="star-2" href="#">2</a>\t\t\t\t\t\t\t<a class="star-3" href="#">3</a>\t\t\t\t\t\t\t<a class="star-4" href="#">4</a>\t\t\t\t\t\t\t<a class="star-5" href="#">5</a>\t\t\t\t\t\t</span>\t\t\t\t\t</p>')}))}function bricksWooProductGalleryEnhance(){void 0!==window.wc_single_product_params&&void 0!==jQuery.fn.flexslider&&(jQuery(document.body).on("wc-product-gallery-before-init",(function(t){jQuery(".brx-product-gallery-thumbnail-slider").each((function(){let t=jQuery(this).data("thumbnail-settings");jQuery(this).flexslider(t)}))})),jQuery(document.body).on("woocommerce_gallery_init_zoom",(function(t){jQuery(".brx-product-gallery-thumbnail-slider").each((function(){let t=jQuery(this).data("flexslider");t&&0===t.currentItem&&0!==t.currentSlide&&jQuery(this).flexslider(0)}))})))}const bricksWooQuantityTriggersFn=new BricksFunction({parentNode:document,selector:"form .quantity .action",subscribejQueryEvents:["updated_cart_totals"],eachElement:t=>{t.addEventListener("click",(function(t){t.preventDefault();var e=t.target.closest(".quantity").querySelector(".qty:not([readonly])");if(!e)return;var r=document.querySelector('button[name="update_cart"]');r&&(r.removeAttribute("disabled"),r.setAttribute("aria-disabled","false")),t.target.classList.contains("plus")?e.stepUp():t.target.classList.contains("minus")&&e.stepDown();const o=new Event("change",{bubbles:!0});e.dispatchEvent(o)}))}});function bricksWooProductsFilter(){bricksQuerySelectorAll(document,".brxe-woocommerce-products-filter .filter-item").forEach((function(t){function e(t){t.target.closest("form").submit()}function r(t){t.target.closest(".filter-item").classList.toggle("open")}bricksQuerySelectorAll(t,".dropdown").forEach((function(t){t.addEventListener("change",e)})),bricksQuerySelectorAll(t,'input[type="radio"], input[type="checkbox"]').forEach((function(t){t.addEventListener("change",e),t.addEventListener("click",e)})),bricksQuerySelectorAll(t,".double-slider-wrap").forEach((function(t){bricksWooProductsFilterInitSlider(t)})),bricksQuerySelectorAll(t,".title").forEach((function(t){t.onclick=r}))}))}function bricksWooMiniModals(){document.querySelectorAll(".bricks-woo-toggle").forEach((function(t){t.addEventListener("click",bricksWooMiniModalsToggle),t.hasAttribute("data-open-on-add-to-cart")&&jQuery(document.body).on("added_to_cart",(function(e,r,o,c){t.click()}))}))}function bricksWooProductsFilterInitSlider(t){var e=t.querySelector("input.lower"),r=t.querySelector("input.upper");e.oninput=bricksWooProductsFilterUpdateSliderValue,r.oninput=bricksWooProductsFilterUpdateSliderValue;var o=parseInt(e.value),c=parseInt(r.value);bricksWooProductsFilterRenderSliderValues(e.parentNode,o,c),e.addEventListener("change",(function(){t.closest("form").submit()})),r.addEventListener("change",(function(){t.closest("form").submit()}))}function bricksWooProductsFilterUpdateSliderValue(t){var e=t.target.parentNode,r=e.querySelector("input.lower"),o=e.querySelector("input.upper"),c=parseInt(r.value),i=parseInt(o.value);i<c+4&&(r.value=i-4,o.value=c+4,c==r.min&&(o.value=4),i==o.max&&(r.value=parseInt(o.max)-4)),bricksWooProductsFilterRenderSliderValues(e,c,i)}function bricksWooProductsFilterRenderSliderValues(t,e,r){var o=t.getAttribute("data-currency"),c=t.querySelector("label.lower"),i=t.querySelector("label.upper"),a=t.querySelector(".value.lower"),n=t.querySelector(".value.upper");a.innerText=c.innerText+": "+o+e,n.innerText=i.innerText+": "+o+r}const bricksWooAjaxAddToCartFn=new BricksFunction({parentNode:document,selector:".single_add_to_cart_button, .brx_ajax_add_to_cart",windowVariableCheck:["bricksWooCommerce.ajaxAddToCartEnabled"],eachElement:t=>{t.addEventListener("click",(function(e){if(e.preventDefault(),t.classList.contains("disabled"))return;const r=t.classList.contains("single_add_to_cart_button")?"single":"loop",o="single"===r?t.closest("form.cart"):t;if("single"===r){const e=t.closest("form.cart");if("get"===e.getAttribute("method"))return void e.submit()}bricksWooAddToCart(o,r)}))}});function bricksWooAjaxAddToCartText(){if(!window.bricksWooCommerce.ajaxAddToCartEnabled)return;const t=function(t){let e={addingHTML:bricksWooCommerce.ajaxAddingText,addedHTML:bricksWooCommerce.ajaxAddedText,showNotice:bricksWooCommerce.showNotice,scrollToNotice:bricksWooCommerce.scrollToNotice,resetTextAfter:bricksWooCommerce.resetTextAfter};if(t.closest(".brxe-product-add-to-cart")&&(customAjaxButtonSettingsObj=t.closest(".brxe-product-add-to-cart")?.getAttribute("data-bricks-ajax-add-to-cart")||!1,customAjaxButtonSettingsObj))try{JSON.parse(customAjaxButtonSettingsObj,((t,r)=>{e[t]=r}))}catch(t){console.error("Bricks WooCommerce: Invalid JSON format for data-bricks-ajax-add-to-cart")}return e};jQuery("body").on("adding_to_cart",(function(e,r,o){r[0].setAttribute("disabled","disabled"),r[0].classList.add("disabled","bricks-cart-adding");const c=t(r[0]);c&&c.addingHTML&&(r[0].hasAttribute("data-original-text")||r[0].setAttribute("data-original-text",r[0].innerHTML),r[0].innerHTML=c.addingHTML)})),jQuery("body").on("added_to_cart",(function(e,r,o,c){c[0].removeAttribute("disabled"),c[0].classList.add("bricks-cart-added"),c[0].classList.remove("disabled","bricks-cart-adding");const i=t(c[0]);i&&i.addedHTML&&(c[0].innerHTML=i.addedHTML,setTimeout((function(){c[0].innerHTML=c[0].getAttribute("data-original-text")}),1e3*i.resetTextAfter)),"string"==typeof window.bricksWooCommerce.addedToCartNotices&&window.bricksWooCommerce.addedToCartNotices.length>0&&"yes"===i.showNotice&&(jQuery(".woocommerce-notices-wrapper").html(window.bricksWooCommerce.addedToCartNotices),window.bricksWooCommerce.addedToCartNotices="","yes"===i.scrollToNotice&&"function"==typeof jQuery.scroll_to_notices&&jQuery.scroll_to_notices(jQuery(".woocommerce-notices-wrapper")))}))}function bricksWooAddToCart(t,e){if("undefined"==typeof woocommerce_params)return;const r="single"===e?t.querySelector(".single_add_to_cart_button"):t,o={};if("single"===e){const e=t,c=new FormData(e);if(o.product_id=r.value,o.quantity=c.get("quantity"),o.product_type="simple",e.classList.contains("variations_form")){o.product_id=c.get("product_id"),o.quantity=c.get("quantity"),o.variation_id=c.get("variation_id"),o.product_type="variable";const t={};for(const e of c.entries())e[0].indexOf("attribute_")>-1&&(t[e[0]]=e[1]);o.variation=t}if(e.classList.contains("grouped_form")){o.product_id=c.get("add-to-cart");const t={};for(const e of c.entries())if(e[0].indexOf("quantity")>-1&&e[1]>0){t[e[0].replace("quantity[","").replace("]","")]=e[1]}o.products=t,o.product_type="grouped"}if("grouped"===o.product_type&&0===Object.keys(o.products).length)return;for(const t of c.entries())"product_id"===t[0]||"quantity"===t[0]||"variation_id"===t[0]||"add-to-cart"===t[0]||t[0].indexOf("attribute_")>-1||(o[t[0]]=t[1])}else o.product_id=r.dataset?.product_id||0,o.quantity=r.dataset?.quantity||1,o.product_type=r.dataset?.product_type||"simple";jQuery("body").trigger("adding_to_cart",[jQuery(r),o]);const c=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","bricks_add_to_cart");jQuery.ajax({type:"POST",url:c,data:o,dataType:"json",success:function(t){t.error&&t.product_url?window.location=t.product_url:"undefined"!=typeof wc_add_to_cart_params&&"yes"===wc_add_to_cart_params.cart_redirect_after_add&&wc_add_to_cart_params.cart_url?window.location=wc_add_to_cart_params.cart_url:(t.fragments&&(bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")),t.notices&&"string"==typeof t.notices&&t.notices.length>0&&void 0!==window.bricksWooCommerce.addedToCartNotices&&(window.bricksWooCommerce.addedToCartNotices=t.notices),jQuery("body").trigger("added_to_cart",[t.fragments,t.cart_hash,jQuery(r)]))},error:function(t){t.error&&t.product_url&&(window.location=t.product_url)},complete:function(t){}})}function bricksWooCheckoutSubmitBehavior(){if("undefined"==typeof wc_checkout_params||!wc_checkout_params.is_checkout)return;const t=jQuery("form.checkout");t&&t.one("checkout_place_order",(function(t,e){"object"==typeof e&&"function"==typeof e.submit_error&&(e.submit_error=function(t){const r=jQuery(".brxe-woocommerce-notice");r.length>0?r.html(t):(jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),e.$checkout_form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+t+"</div>")),e.$checkout_form.removeClass("processing").unblock(),e.$checkout_form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),e.scroll_to_notices(),jQuery(document.body).trigger("checkout_error",[t])},"function"==typeof e.scroll_to_notices&&(e.scroll_to_notices=function(){const t=jQuery(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout, .brxe-woocommerce-notice");t.length||(t=jQuery("form.checkout")),jQuery.scroll_to_notices(t)}))}))}const bricksWooLoopQtyListenerFn=new BricksFunction({parentNode:document,selector:".brx-loop-product-form input.qty",windowVariableCheck:["bricksWooCommerce.useQtyInLoop"],eachElement:t=>{t.addEventListener("change",(t=>{const e=t.target.closest("form.brx-loop-product-form");if(e){const r=t.target.value,o=e.querySelector(".add_to_cart_button");if(o){const t=new URL(o.href);t.searchParams.set("quantity",r),o.href=t.toString(),o.setAttribute("data-quantity",r)}}}))}});document.addEventListener("DOMContentLoaded",(function(t){bricksWooProductsFilter(),bricksWooMiniModals(),bricksWooMiniCartHideDetailsClickOutside(),bricksWooAjaxAddToCartText(),bricksWooAjaxAddToCartFn.run(),bricksWooCheckoutSubmitBehavior(),bricksWooProductGalleryEnhance(),setTimeout((function(){bricksWooQuantityTriggersFn.run(),bricksWooLoopQtyListenerFn.run()}),150)}));
